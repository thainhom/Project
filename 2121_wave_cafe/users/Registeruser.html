<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://www.phptutorial.net/app/css/style.css"
    />
    <!-- <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    /> -->
    <link rel="stylesheet" href="registeruser.css" />
    <title>Register</title>
  </head>
  <body>
    <video
      id="background-video"
      autoplay
      loop
      muted
      poster="https://assets.codepen.io/6093409/river.jpg"
    >
      <source src="./wave-cafe-video-bg.mp4" type="video/mp4" />
    </video>
    <main>
      <h1>Sign Up</h1>

      <div>
        <label for="email">Email:</label>
        <input type="email" name="email" id="email" />
      </div>
      <div>
        <label for="password">Password:</label>
        <input type="password" name="password" id="password" />
      </div>
      <div>
        <label for="password2">Password Again:</label>
        <input type="password" name="password2" id="password2" />
      </div>
      <div>
        <label for="agree">
          <input type="checkbox" name="agree" id="agree" value="yes" /> I agree
          with the
        </label>
      </div>
      <button onclick="register()" type="submit">Register</button>
      <button onclick="login()">login</button>
    </main>
    <script>
      const register = () => {
        // let input1 = document.getElementById("username").value;
        let input1 = document.getElementById("email").value;
        let input2 = document.getElementById("password").value;
        let input3 = document.getElementById("password2").value;

        const isuser = JSON.parse(localStorage.getItem("users")) ?? [];
        let flag = false;
        isuser.forEach((item) => {
          if (item.email === input1) {
            flag = true;
          }
        });
        let user = {
          id: `${isuser.length + 1}`,
          email: input1,
          password: input2,
          role: "users",
          status: "active",
        };
        if (!flag) {
          isuser.push(user);
          localStorage.setItem("users", JSON.stringify(isuser));
          window.location = "Loginuser.html";
        } else {
          alert("Vui lòng nhập lại");
        }
      };
      const login = () => {
        window.location = "Loginuser.html";
      };
    </script>
  </body>
</html>
